<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PANDU-GI: Multi-Bay</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --pln-blue: #00549b; --pln-yellow: #ffec00; }
        body { background-color: #f4f7f6; font-family: sans-serif; }
        .navbar { background-color: var(--pln-blue) !important; }
        .search-container { position: sticky; top: 0; z-index: 1000; background: #f4f7f6; padding: 10px 0; }
        .nav-pills .nav-link.active { background-color: var(--pln-blue); }
        .nav-pills .nav-link { color: var(--pln-blue); border: 1px solid var(--pln-blue); margin-right: 5px; margin-bottom: 5px; }
        .card-annunciator { border-left: 5px solid var(--pln-blue); margin-bottom: 12px; cursor: pointer; transition: 0.2s; }
        .card-annunciator:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .tindakan-box { background-color: #e8f4fd; border-radius: 8px; padding: 12px; border: 1px dashed var(--pln-blue); }
    </style>
</head>
<body>

<nav class="navbar navbar-dark">
    <div class="container">
        <span class="navbar-brand mb-0 h1">PANDU-GI <small id="currentBayLabel" style="font-size: 0.6em; color: var(--pln-yellow);">(Pilih Bay)</small></span>
    </div>
</nav>

<div class="container mt-3">
    <ul class="nav nav-pills mb-3" id="bayFilter">
        <li class="nav-item">
            <button class="nav-link active" onclick="switchBay('Cikarang 1', this)">Cikarang 1</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" onclick="switchBay('Cikarang 2', this)">Cikarang 2</button>
        </li>
    </ul>

    <div class="search-container">
        <input type="text" id="searchInput" class="form-control form-control-lg shadow-sm" placeholder="Ketik indikasi gangguan..." onkeyup="searchFunction()">
        <div id="resultCount" class="form-text mt-2 text-muted small">Memuat data...</div>
    </div>

    <div id="annunciatorList" class="pb-5"></div>
</div>

<div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header text-white" style="background-color: var(--pln-blue);">
                <h5 class="modal-title" id="modalTitle"></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p class="mb-1 text-muted small text-uppercase fw-bold">Maksud:</p>
                <p id="modalMaksud"></p>
                <p class="mb-1 text-muted small text-uppercase fw-bold">Penyebab:</p>
                <p id="modalPenyebab"></p>
                <div class="tindakan-box">
                    <p class="mb-1 text-muted small text-uppercase fw-bold text-primary">Tindakan Penanggulangan:</p>
                    <p id="modalTindakan" class="mb-0 fw-bold"></p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    let currentBay = 'Cikarang 1';
    
    // Gabungan Data Cikarang 1 dan Cikarang 2
    const allData = [
        // DATA CIKARANG 1
        {bay: "Cikarang 1", no: 1, nama: "C/S/G DC SUPPLIES FAILURE", maksud: "Terjadi trip di MCB DC di Panel ACDB Switch L/R", penyebab: "Tegangan supply panel Rele dan Kontrol hilang", tindakan: "Periksa MCB di Panel ACDB, jika Trip naikan kembali"},
        {bay: "Cikarang 1", no: 2, nama: "CB ON LOCAL OPERATED", maksud: "Posisi pada Box PMT Posisi Lokal", penyebab: "PMT tidak Bisa di operasikan secara remote baik dari Panel Maupun dari UP2B", tindakan: "Periksa L/R pada Box PMT, Posisikan Remote Kembali"},
        {bay: "Cikarang 1", no: 3, nama: "T1/T2 Failure", maksud: "Terjadi Trip MCB Supplay Rangkaian Trip1/2 Turun", penyebab: "Suplay tenganan untuk Rangkaian Trip terganggu", tindakan: "Periksa MCB Suplay Rangkaian Trip, jika Trip naikan kembali"},
        {bay: "Cikarang 1", no: 4, nama: "Spring Charge Failure", maksud: "System pengisian pegas tidak siap sehingga PMT tidak bisa trip", penyebab: "Supply tegangan untuk pengisian motor pegas PMT Trip/terganggu", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 5, nama: "F21 Received DTT", maksud: "PMT Trip karena Rele Distance menerima perintah dari GI Lawan", penyebab: "Ada gangguan pada system 150 kV", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 1", no: 6, nama: "F21 Send DTT", maksud: "PMT Trip karena perintah Rele Distance, Rele Mengirim Trip ke GI Lawan", penyebab: "Ada gangguan pada system 150 kV", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 1", no: 7, nama: "MK Local Position", maksud: "Posisi Switch L/R pada MK Posisi Lokal", penyebab: "Peralatan Tidak Bisa di operasikan secara remote baik dari Panel Maupun dari UP2B", tindakan: "Priksa L/R pada MK Posisikan Remote Kembali"},
        {bay: "Cikarang 1", no: 8, nama: "Unit Trip Lockout", maksud: "Master Trip mengerjakan lockout", penyebab: "Ada gangguan yang menyebabkan trip dan perlu investigasi lanjut", tindakan: "Periksa, catat, reset dan laporkan sesuai prosedur"},
        {bay: "Cikarang 1", no: 9, nama: "Isollator DS/DSL and CB Motor Supplay Failure", maksud: "MCB Supplay Motor PMS Trip di MK/Box PMS", penyebab: "Supplay Tegangan Untuk Motor Hilang, Motor tidak bisa dioperasikan", tindakan: "Priksa MCB pada MK/Box PMS, Posisikan ON Kembali"},
        {bay: "Cikarang 1", no: 10, nama: "CB Pole Discrepancy", maksud: "Keserempakan PMT 150 kV saat close tidak bersamaan", penyebab: "Keterlambatan salah satu fasa pada PMT 150kV saat close", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 1", no: 11, nama: "F5051 PH +N Operated", maksud: "PMT 150 kV Trip karena Rele OCR 150 kV bekerja", penyebab: "Ada gangguan hubung singkat antara fasa-fasa dan fasa ke tanah", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 12, nama: "CB SF6 Alarm ST 1", maksud: "Terjadi penurunan Tekanan gas sampai level Alarm", penyebab: "Ada kebocoran pada PMT 150 kV", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 13, nama: "CB Gas Trip Lockout", maksud: "PMT 150 kV Trip karena tekanan SF6 di PMT turun", penyebab: "Ada kebocoran pada PMT 150 kV", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 14, nama: "CB Open", maksud: "Indikasi PMT 150 kV dalam Kondisi Open", penyebab: "PMT 150kV Open", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 15, nama: "OLS Cikarang 1 Trip", maksud: "Relay OLS Bekerja pengurangan beban", penyebab: "PMT 150kV Trafo 3 Trip Akibat OLS Bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 16, nama: "Dead VT Line Detection Failure", maksud: "Tegangan Pada VT Bermasalah", penyebab: "Tegangan yang dibaca oleh VT terganggu", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 17, nama: "Main Protection Failure F21", maksud: "Rele Distance Bermasalah", penyebab: "Rele distance terganggu sehingga tidak dapat bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 18, nama: "Backup Prot Failure F5051PH+N", maksud: "Rele Backup (OCR) Bermasalah", penyebab: "Rele OCR terganggu sehingga tidak dapat bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 19, nama: "BMQ Failure", maksud: "BCU Bermasalah", penyebab: "BCU terganggu sehingga tidak dapat bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 1", no: 20, nama: "TCS 1/2 Failure", maksud: "Rangkaian Trip pada PMT Bermasalah", penyebab: "PMT 150kV Tidak Bisa Close", tindakan: "Periksa Rangkaian, catat, dan laporkan"},
        {bay: "Cikarang 1", no: 21, nama: "F21 Operated", maksud: "PMT Trip karena Rele Distance bekerja", penyebab: "Ada gangguan pada system 150 kV", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 1", no: 22, nama: "Lockout Trip 2 Operated", maksud: "Master Trip mengerjakan lockout", penyebab: "Ada gangguan yang menyebabkan trip dan perlu investigasi lanjut", tindakan: "Periksa, catat, reset dan laporkan sesuai prosedur"},
        {bay: "Cikarang 1", no: 23, nama: "Busbar Protection Operated", maksud: "Rele pada Busbar Bekerja", penyebab: "PMT Trip akibat dari Rele busbar, ada gangguan pada busbar", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},

        // DATA CIKARANG 2
        {bay: "Cikarang 2", no: 1, nama: "C/S/G DC SUPPLIES FAILURE", maksud: "Terjadi trip di MCB DC di Panel ACDB", penyebab: "Tegangan supply panel Rele dan Kontrol hilang", tindakan: "Periksa MCB di Panel ACDB, jika Trip naikan kembali"},
        {bay: "Cikarang 2", no: 2, nama: "CB ON LOCAL OPERATED", maksud: "Posisi Switch L/R pada Box PMT Posisi Lokal", penyebab: "PMT tidak Bisa di operasikan secara remote baik dari Panel Maupun dari UP2B", tindakan: "Priksa L/R pada Box PMT, Posisikan Remote Kembali"},
        {bay: "Cikarang 2", no: 3, nama: "T1/T2 Failure", maksud: "Terjadi Trip MCB Supplay Rangkaian Trip1/2 Turun", penyebab: "Suplay tenganan untuk Rangkaian Trip terganggu", tindakan: "Periksa MCB Suplay Rangkaian Trip, jika Trip naikan kembali"},
        {bay: "Cikarang 2", no: 4, nama: "Spring Charge Failure", maksud: "System pengisian pegas tidak siap sehingga PMT tidak bisa trip", penyebab: "Supply tegangan untuk pengisian motor pegas PMT Trip/terganggu", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 5, nama: "F21 Received DTT", maksud: "PMT Trip karena Rele Distance menerima perintah dari GI Lawan", penyebab: "Ada gangguan pada system 150 kV", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 2", no: 6, nama: "F21 Send DTT", maksud: "PMT Trip karena Rele Distance, Rele Mengirim perintah Trip ke GI Lawan", penyebab: "Ada gangguan pada system 150 kV", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 2", no: 7, nama: "MK Local Position", maksud: "Posisi Switch L/R pada MK Posisi Lokal", penyebab: "Peralatan Tidak Bisa di operasikan secara remote baik dari Panel Maupun dari UP2B", tindakan: "Priksa L/R pada MK Posisikan Remote Kembali"},
        {bay: "Cikarang 2", no: 8, nama: "Unit Trip Lockout", maksud: "Master Trip mengerjakan lockout", penyebab: "Ada gangguan yang menyebabkan trip dan perlu investigasi lanjut", tindakan: "Periksa, catat, reset dan laporkan sesuai prosedur"},
        {bay: "Cikarang 2", no: 9, nama: "Isollator DS/DSL and CB Motor Supplay Failure", maksud: "MCB Supplay Motor PMS Trip di MK/Box PMS", penyebab: "Supplay Tegangan Untuk Motor Hilang, Motor tidak bisa dioperasikan", tindakan: "Priksa MCB pada MK/Box PMS, Posisikan ON Kembali"},
        {bay: "Cikarang 2", no: 10, nama: "CB Pole Discrepancy", maksud: "Keserempakan PMT 150 kV saat close tidak bersamaan", penyebab: "Keterlambatan salah satu fasa pada PMT 150kV saat close", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 2", no: 11, nama: "F5051 PH +N Operated", maksud: "PMT 150 kV Trip karena Rele OCR 150 kV bekerja", penyebab: "Ada gangguan hubung singkat antara fasa-fasa dan fasa ke tanah", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 12, nama: "CB SF6 Alarm ST 1", maksud: "Terjadi penurunan Tekanan gas level Alarm", penyebab: "Ada kebocoran pada PMT 150 kV", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 13, nama: "CB Gas Trip Lockout", maksud: "PMT 150 kV Trip karena tekanan SF6 di PMT turun", penyebab: "Ada kebocoran pada PMT 150 kV", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 14, nama: "CB Open", maksud: "Indikasi PMT 150 kV dalam Kondisi Open", penyebab: "PMT 150kV Open", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 15, nama: "OLS Cikarang 2 Trip", maksud: "Relay OLS Bekerja pengurangan beban", penyebab: "PMT 150kV Trafo 3 Trip Akibat OLS Bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 16, nama: "Supplay AC Failure", maksud: "MCB Trip Pada Panel ACDB untuk Suplay AC", penyebab: "Tegangan Suplay AC Terganggu", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 17, nama: "Main Protection Failure F21", maksud: "Rele Distance Bermasalah", penyebab: "Rele distance terganggu sehingga tidak dapat bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 18, nama: "Backup Prot Failure F5051PH+N", maksud: "Rele Backup (OCR) Bermasalah", penyebab: "Rele OCR terganggu sehingga tidak dapat bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 19, nama: "BMQ Failure", maksud: "BCU Bermasalah", penyebab: "BCU terganggu sehingga tidak dapat bekerja", tindakan: "Periksa, catat, reset indikasi, dan laporkan"},
        {bay: "Cikarang 2", no: 20, nama: "TCS 1/2 Failure", maksud: "Rangkaian Trip pada PMT Bermasalah", penyebab: "PMT 150kV Tidak Bisa Close", tindakan: "Periksa Rangkaian, catat, dan laporkan"},
        {bay: "Cikarang 2", no: 21, nama: "F21 Operated", maksud: "PMT Trip karena Rele Distance bekerja", penyebab: "Ada gangguan pada system 150 kV", tindakan: "Periksa, catat, dan laporkan"},
        {bay: "Cikarang 2", no: 22, nama: "Lockout Trip 2 Operated", maksud: "Master Trip mengerjakan lockout", penyebab: "Ada gangguan yang menyebabkan trip dan perlu investigasi lanjut", tindakan: "Periksa, catat, reset dan laporkan sesuai prosedur"},
        {bay: "Cikarang 2", no: 23, nama: "Busbar Protection Operated", maksud: "Rele pada Busbar Bekerja", penyebab: "PMT Trip akibat dari Rele busbar, ada gangguan pada busbar", tindakan: "Periksa, catat, reset indikasi, dan laporkan"}

        // DATA TRAFO 1
        {bay:"Trafo3",no:1,nama:"CB Q0 â€“ On Local",maksud:"Posisi PMT pada posisi Local",penyebab:"Switch R/S pada posisi remote atau local",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:2,nama:"DS Q1/Q2 On Local",maksud:"Posisi PMS Rel Posisi Local",penyebab:"Switch R/S pada posisi remote atau local",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:3,nama:"Common Trafo Alarm",maksud:"Ada Rele Lock Out mekanik yang kerja di Panel Trafo",penyebab:"Ada gangguan Internal trafo (Winding HV / LV atau Core)",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:4,nama:"Alarm SF6 Low Level",maksud:"Ada penurunan tekanan Gas SF6 di PMT sampai level alarm",penyebab:"Ada kebocoran di system pengisian maupun kerusakan sealing",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:5,nama:"CB lockout SF6 Operated",maksud:"Ada penurunan tekanan Gas SF6 di PMT sampai level lockout",penyebab:"Ada kebocoran di system pengisian maupun kerusakan sealing",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:6,nama:"CB Mecanic Spring Discarge",maksud:"Pegas PMT tidak siap untuk operasi",penyebab:"Suplay 110 untuk motor terganggu ,mekanik penggerak bermasalah",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:7,nama:"CB Supplay Failure",maksud:"Ada gangguan suplay DC 380 V pada PMT",penyebab:"MCB 3 pole QF1 di MK Trip",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:8,nama:"DS Q1/Q2 Supplay Fail",maksud:"Ada gangguan supplay PMS Rel di MK",penyebab:"MCB untuk suplay motor PMS Trip ,ada kerusakan motor PMS",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:9,nama:"Common Trafo Trip",maksud:"PMT 150/20 KV Trip karena gangguan internal Trafo",penyebab:"Gangguan internal yang dideteksi oleh Rele mekanik trafo",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:10,nama:"MK Supplay Trip",maksud:"Ada gangguan pada suplay 380V ke MK",penyebab:"MCB untuk supplay ke MK di ACDB trip atau ada gangguan jaringan",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:11,nama:"TCS 1 Failure",maksud:"PMT tidak siap trip karena rele trip circuit satu gagal",penyebab:"Ada kegagalan rangkaian Triping coil PMT No 1 di MK",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:12,nama:"TCS 2 Failure",maksud:"PMT tidak siap trip karena rele trip circuit dua gagal",penyebab:"Ada kegagalan rangkaian Triping coil PMT No 2 di MK",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:13,nama:"Lockout Operated",maksud:"Master Trip mengerjakan lockout",penyebab:"Ada gangguan yang menyebabkan trip dan perlu inspeksi lanjut",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"},
        {bay:"Trafo3",no:14,nama:"BVT MCB Trip",maksud:"MCB VT busbar trip di MK",penyebab:"Ada sort sirkit di beban VT ataupun ada beban berlebih",tindakan:"Periksa ,catat ,reset dan laporkan sesuai prosedur"}
]

    ];

    function renderList(filteredData) {
        const container = document.getElementById('annunciatorList');
        const count = document.getElementById('resultCount');
        container.innerHTML = '';
        
        filteredData.forEach((item, index) => {
            const card = `
                <div class="card card-annunciator shadow-sm" onclick="showDetail('${item.bay}', ${item.no})">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <h6 class="card-title text-primary mb-0 fw-bold">${item.nama}</h6>
                            <span class="badge bg-light text-dark border" style="font-size: 0.7rem;">#${item.no}</span>
                        </div>
                        <p class="card-text small text-muted mb-0"><strong>Penyebab:</strong> ${item.penyebab}</p>
                    </div>
                </div>
            `;
            container.innerHTML += card;
        });
        count.innerText = `Ditemukan ${filteredData.length} indikasi di ${currentBay}`;
    }

    function switchBay(bayName, el) {
        currentBay = bayName;
        document.getElementById('currentBayLabel').innerText = `(${bayName})`;
        document.querySelectorAll('#bayFilter .nav-link').forEach(btn => btn.classList.remove('active'));
        el.classList.add('active');
        document.getElementById('searchInput').value = '';
        searchFunction();
    }

    function searchFunction() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const filtered = allData.filter(item => 
            item.bay === currentBay && (
            item.nama.toLowerCase().includes(input) || 
            item.penyebab.toLowerCase().includes(input) ||
            item.maksud.toLowerCase().includes(input))
        );
        renderList(filtered);
    }

    function showDetail(bay, no) {
        const item = allData.find(d => d.bay === bay && d.no === no);
        document.getElementById('modalTitle').innerText = item.nama;
        document.getElementById('modalMaksud').innerText = item.maksud;
        document.getElementById('modalPenyebab').innerText = item.penyebab;
        document.getElementById('modalTindakan').innerText = item.tindakan;
        new bootstrap.Modal(document.getElementById('detailModal')).show();
    }

    window.onload = () => { switchBay('Cikarang 1', document.querySelector('#bayFilter .nav-link')); };
</script>

</body>
</html>
